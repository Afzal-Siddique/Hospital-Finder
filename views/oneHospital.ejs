<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Hackathon</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Work+Sans:100,200,300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="/stylesheets/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="/stylesheets/css/animate.css">

    <link rel="stylesheet" href="/stylesheets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/stylesheets/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="/stylesheets/css/magnific-popup.css">

    <link rel="stylesheet" href="/stylesheets/css/aos.css">

    <link rel="stylesheet" href="/stylesheets/css/ionicons.min.css">

    <link rel="stylesheet" href="/stylesheets/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="/stylesheets/css/jquery.timepicker.css">


    <link rel="stylesheet" href="/stylesheets/css/flaticon.css">
    <link rel="stylesheet" href="/stylesheets/css/icomoon.css">
    <link rel="stylesheet" href="/stylesheets/css/style.css">

    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.2/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.2/mapbox-gl.css' rel='stylesheet' />
    <style>
    body { margin:0; padding:0; }
    #map { position:absolute; padding: 0px; top:0; bottom:0; width:100%; height: 400px; }
  </style>
  </head>
  <body>
    <style>
    .dropdown-menu a:hover{background-color:  #d1e0e0;}
    </style>

    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.1/mapbox-gl-geocoder.min.js'></script>
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.1/mapbox-gl-geocoder.css' type='text/css' />

    <nav class="navbar navbar-expand-lg" id="ftco-navbar">
      <div class="container d-flex align-items-center">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="oi oi-menu"></span> Menu
        </button>
        <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item  row no-gutters d-flex align-items-start align-items-center px-3 px-md-0"><a class="navbar-brand" href="/">Hospital<span>finder</span></a></li>
            <li class="nav-item"><a href="#about" class="nav-link">About</a></li>
            </ul>
        </div>
      </div>
    </nav>

    <div id="row">
    <div class="col-lg-6 col-md-6 "><div id='map'></div></div>
    
        <script>
        mapboxgl.accessToken = 'pk.eyJ1Ijoicm9kcm9iIiwiYSI6ImNrMTBnZ2NyaTA1bGUzYnZ6c2V2ZmR5OXQifQ.K3DQfl7-XhSHY-Izq6z9VA';
        var map = new mapboxgl.Map({
        container: 'map', // container id
        style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location
        center: ["<%=hospital.longitude%>","<%=hospital.latitude%>"], // starting position [lng, lat]
        zoom: 16 // starting zoom
        });
        var marker = new mapboxgl.Marker({
            draggable: true
            })
            .setLngLat(["<%=hospital.longitude%>", "<%=hospital.latitude%>"])
            .addTo(map);
            
            function onDragEnd() {
            var lngLat = marker.getLngLat();
            coordinates.style.display = 'block';
            coordinates.innerHTML = 'Longitude: ' + lngLat.lng + '<br />Latitude: ' + lngLat.lat;
        }
        marker.on('dragend', onDragEnd);</script>
    </div>
    <div class="col-lg-6 col-md-6 p-4 p-md-5 order-md-last float-right mr-4 " style="height:400px">
        <h1 class="text-primary"><%=hospital.address%></h1>
        <p>Hospital_category:<span class="text-primary"><%=hospital.category%></span></p>
        <p>Pincode: <span class="text-primary"><%=hospital.pincode%></span></p>
        </div>
        <div class="col-md-6 d-flex align-items-stretch">
        <div id="map"></div>
        </div> 

    <div class="container row ml-4"> 

        <div class="row mt-5 pt-2">
            <div class="col-lg-6">
              <div class="services-2 d-flex">
              <div class="icon mt-2 mr-3 d-flex justify-content-center align-items-center"><span class="flaticon-first-aid-kit"></span></div>
              <div class="text">
                <p>Address: <span class="text-primary"><%=hospital.address%></span></p>
                <p>State: <span class="text-primary"><%=hospital.state%></span></p>
              </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="services-2 d-flex">
              <div class="icon mt-2 mr-3 d-flex justify-content-center align-items-center"><span class="flaticon-dropper"></span></div>
              <div class="text">
          
                <p>specialties: <span class="text-primary"><%=hospital.specialties%></span></p>
              </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="services-2 d-flex">
              <div class="icon mt-2 mr-3 d-flex justify-content-center align-items-center"><span class="flaticon-experiment-results"></span></div>
              <div class="text">
                <p>Phone: <span class="text-primary"><%=hospital.telephone%></span></p>
              </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="services-2 d-flex">
              <div class="icon mt-2 mr-3 d-flex justify-content-center align-items-center"><span class="flaticon-heart-rate"></span></div>
              <div class="text">
                <p>Website:<a style="width:50px;"                           
                href="<%=hospital.website%>">
                <pre><%=hospital.website%></pre></a></p>
              </div>
              </div>
            </div>
            </div>
    </div>

           
<div class="container mt-4">
  <h1 class="display-4 text-center">
    <i class="fas fa-book-open text-primary"></i> Feed<span class="text-primary">Back</span></h1>
    <form id="book-form">
      <div class="form-group">
        
        <input type="text" placeholder="Feedback" id="title" class="form-control">
      </div>
      <div class="form-group">
        <input type="text" placeholder="Name" id="author" class="form-control">
      </div>
      <div class="form-group">
        
        <input type="text" id="isbn" placeholder="Email" class="form-control">
      </div>
      <input type="submit" value="submit" class="btn btn-primary btn-block">
    </form>
    <div class="card">
          <div id="book-list" class="card-body">
            
          </div>
    </div>
</div>

<script>
    class Book {
constructor(title, author, isbn) {
this.title = title;
this.author = author;
this.isbn = isbn;
}
}

// UI Class: Handle UI Tasks
class UI {
static displayBooks() {
const books = Store.getBooks();

books.forEach((book) => UI.addBookToList(book));
}

static addBookToList(book) {
const list = document.querySelector('#book-list');

const row = document.createElement('div');

row.innerHTML = `

<h5>${book.title}</h5>
<span>Name:${book.author}</span>

<span>Email: ${book.isbn}</span>

<hr>



`;

list.appendChild(row);
}

//   static deleteBook(el) {
//     if(el.classList.contains('delete')) {
//       el.parentElement.parentElement.remove();
//     }
//   }

static showAlert(message, className) {
const div = document.createElement('div');
div.className = `alert alert-${className}`;
div.appendChild(document.createTextNode(message));
const container = document.querySelector('.container');
const form = document.querySelector('#book-form');
container.insertBefore(div, form);

// Vanish in 3 seconds
setTimeout(() => document.querySelector('.alert').remove(), 3000);
}

static clearFields() {
document.querySelector('#title').value = '';
document.querySelector('#author').value = '';
document.querySelector('#isbn').value = '';
}
}

// Store Class: Handles Storage
class Store {
static getBooks() {
let books;
if(localStorage.getItem('books') === null) {
books = [];
} else {
books = JSON.parse(localStorage.getItem('books'));
}

return books;
}

static addBook(book) {
const books = Store.getBooks();
books.push(book);
localStorage.setItem('books', JSON.stringify(books));
}

//   static removeBook(isbn) {
//     const books = Store.getBooks();

//     books.forEach((book, index) => {
//       if(book.isbn === isbn) {
//         books.splice(index, 1);
//       }
//     });

//     localStorage.setItem('books', JSON.stringify(books));
//   }
}

// Event: Display Books
document.addEventListener('DOMContentLoaded', UI.displayBooks);

// Event: Add a Book
document.querySelector('#book-form').addEventListener('submit', (e) => {
// Prevent actual submit
e.preventDefault();

// Get form values
const title = document.querySelector('#title').value;
const author = document.querySelector('#author').value;
const isbn = document.querySelector('#isbn').value;

// Validate
if(title === '' || author === '' || isbn === '') {
UI.showAlert('Please fill in all fields', 'danger');
} else {
// Instatiate book
const book = new Book(title, author, isbn);

// Add Book to UI
UI.addBookToList(book);

// Add book to store
Store.addBook(book);

// Show success message
UI.showAlert('Book Added', 'success');

// Clear fields
UI.clearFields();
}
});

// Event: Remove a Book
// document.querySelector('#book-list').addEventListener('click', (e) => {
//   // Remove book from UI
//   UI.deleteBook(e.target);

//   // Remove book from store
//   Store.removeBook(e.target.parentElement.previousElementSibling.textContent);

//   // Show success message
//   UI.showAlert('Book Removed', 'success');
// });
</script>



        
        <!-- <% var latitude = 19 %>
        <% var longitude = 78%> -->
        
        
    <script src="/stylesheets/js/jquery.min.js"></script>
    <script src="/stylesheets/js/jquery-migrate-3.0.1.min.js"></script>
    <script src="/stylesheets/js/popper.min.js"></script>
    <script src="/stylesheets/js/bootstrap.min.js"></script>
    <script src="/stylesheets/js/jquery.easing.1.3.js"></script>
    <script src="/stylesheets/js/jquery.waypoints.min.js"></script>
    <script src="/stylesheets/js/jquery.stellar.min.js"></script>
    <script src="/stylesheets/js/owl.carousel.min.js"></script>
    <script src="/stylesheets/js/jquery.magnific-popup.min.js"></script>
    <script src="/stylesheets/js/aos.js"></script>
    <script src="/stylesheets/js/jquery.animateNumber.min.js"></script>
    <script src="/stylesheets/js/bootstrap-datepicker.js"></script>
    <script src="/stylesheets/js/jquery.timepicker.min.js"></script>
    <script src="/stylesheets/js/scrollax.min.js"></script>
    <script src="/stylesheets/js/google-map.js"></script>
    <script src="/stylesheets/js/main.js"></script>
    </html>